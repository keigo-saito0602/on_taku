<div class="flex items-center justify-between">
  <div>
    <div class="text-sm text-slate-500">アプリ共通の割引を管理します。</div>
    <h1 class="mt-1 text-2xl font-semibold text-slate-900">割引一覧</h1>
  </div>
  <%= link_to "割引を追加", new_discount_path, class: "inline-flex items-center rounded-lg bg-sky-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-sky-500" %>
</div>

<div class="mt-6 overflow-hidden rounded-xl border border-slate-200 bg-white shadow">
  <table class="min-w-full divide-y divide-slate-200 text-sm">
    <thead class="bg-slate-50 text-left text-xs font-semibold uppercase tracking-wider text-slate-600">
      <tr>
        <th class="px-4 py-3">順序</th>
        <th class="px-4 py-3">名称</th>
        <th class="px-4 py-3">種別</th>
        <th class="px-4 py-3">値</th>
        <th class="px-4 py-3">説明</th>
        <th class="px-4 py-3 text-right">操作</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-slate-100 bg-white">
      <% @discounts.each do |discount| %>
        <tr class="hover:bg-slate-50">
          <td class="px-4 py-3 font-mono text-slate-500"><%= discount.priority %></td>
          <td class="px-4 py-3 font-semibold text-slate-800"><%= discount.name %></td>
          <td class="px-4 py-3 text-slate-600"><%= discount.kind_percentage? ? "割合" : "固定額" %></td>
          <td class="px-4 py-3 text-slate-600">
            <% if discount.kind_percentage? %>
              <%= discount.value %>%
            <% else %>
              ¥<%= number_with_delimiter(discount.value) %>
            <% end %>
          </td>
          <td class="px-4 py-3 text-slate-500"><%= discount.description.presence || "-" %></td>
          <td class="px-4 py-3 text-right text-xs font-semibold text-slate-500">
            <div class="flex justify-end gap-3">
              <%= link_to "編集", edit_discount_path(discount), class: "text-sky-600 hover:text-sky-500" %>
              <%= button_to "削除", discount, method: :delete,
                    form: { data: { turbo_confirm: "割引を削除しますか？" } },
                    class: "text-rose-600 hover:text-rose-500" %>
            </div>
          </td>
        </tr>
      <% end %>
      <% if @discounts.blank? %>
        <tr>
          <td colspan="6" class="px-4 py-6 text-center text-sm text-slate-500">登録されている割引はありません。</td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
