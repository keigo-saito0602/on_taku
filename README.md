# 音卓（おんたく / ON Taku）

イベントの現場運営を支援するタイムテーブル管理サービスです。

進行表・転換時間・出演者・機材・開場／開演といった、イベント運営に必要な情報を一つの “卓” に統合し、現場特有の判断や変更にも柔軟に対応できる運営体制をサポートします。

## 主な機能

- おしらせ管理(イベント情報一覧) // 未実装
- ユーザー登録／ログイン（メール + パスワード、8〜32 文字）
  - オーガナイザーユーザーはシステム管理者が追加可能
  - オーガナイザーはイベントスタッフを追加/管理可能
  - ロール詳細：システム管理者、オーガナイザー、スタッフ、PA・照明）
- 所属管理(所属内アカウント一覧をオーガナイザー権限ユーザーに提供) // 未実装
  - アカウント有効/無効/アカウント名/メールアドレス変更
- ログイン状態に応じたヘッダー切り替え（未ログイン=イベントのみ／ログイン=イベント+アーティスト+アカウント）
- イベント管理（下書き・公開、公演日/会場/料金/時間帯）
- タイムテーブル管理（ドラッグ&ドロップ編集、テンプレート適用、転換枠挿入）
- 割引マスタ管理（名称/種別/値/優先度の登録・編集・削除）
- メニュー管理(メニュー追加/変更) // 未実装
- アーティスト管理（バンド/DJ 区分、公開制御、出演履歴表示）
- 機材管理（管理機材一覧、アーティスト使用機材の管理） // 未実装
- 割引登録/適用による料金シミュレーター
- アカウント設定／ログアウト導線（`/account` で表示・セッション削除）
- Google カレンダー登録機能 // 未実装
- 仮フライヤー作成機能 // 未実装

## セットアップ

```bash

mise install # Ruby / Node のインストール

mise exec -- bundle install

mise exec -- bin/rails db:prepare

mise exec -- bin/rails db:seed # サンプルデータの投入

```

開発サーバーの起動 (Tailwind + Rails 同時実行):

```bash

mise exec -- bin/dev

```

### サンプルアカウント

| ロール | メール                | パスワード |
| ------ | --------------------- | ---------- |
| 主催者 | organizer@example.com | Password1  |
| 評価者 | reviewer@example.com  | Password1  |

## テスト

```bash

mise exec -- bin/rails test

```

- モデル単位で料金計算やタイムテーブル制約などを検証しています。

## プロダクトビジョン

音卓（おんたく / ON Taku）は、バンドイベントやライブハウス、クラブイベント、野外イベントなど音楽の現場に携わるすべての人のための運営支援サービスです。

アーティスト、主催者、PA、照明、そしてオーディエンス。すべての音楽体験をよりスムーズに、よりクリエイティブにするために、ライブの裏側にある熱量と調和を支えます。

## 注意事項

- 割引計算は固定額（学割/取置）を先に適用し、その後に早割 10%を掛ける仕様です。
- タイムテーブルの時間刻みは 5 分単位、テンプレートは任意の分数・均等配分に対応します。
- 公開には少なくとも 1 枠のタイムテーブルが必要です。
